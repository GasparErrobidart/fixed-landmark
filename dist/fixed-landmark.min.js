"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}();function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Box=function(){function t(e){_classCallCheck(this,t),"string"==typeof e?this.dom=document.querySelector(e):"object"==(void 0===e?"undefined":_typeof(e))&&(this.dom=e),this.dom||console.error("Element ("+e+") wasn't found.")}return _createClass(t,[{key:"rect",value:function(){return this.dom.getBoundingClientRect()}},{key:"styles",value:function(){return this.dom.currentStyle||window.getComputedStyle(this.dom)}}]),t}(),Landmark=function(t){function e(t){_classCallCheck(this,e);var o=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,document.createElement("div")));return o.target=t,o.parent=t.dom.parentNode,o.update(),o.parent.insertBefore(o.dom,o.target.dom),o.display(!1),o}return _inherits(e,Box),_createClass(e,[{key:"display",value:function(t){this.dom.style.height=t?this.target.rect().height+"px":"0px"}},{key:"update",value:function(){var t=this;this.dom.style.width=this.target.rect().width+"px",this.dom.style.height=this.target.rect().height+"px",["marginTop","marginBottom","marginLeft","marginRight"].forEach((function(e){return t.dom.style[e]=t.target.dom.style[e]}))}}]),e}(),Container=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return _inherits(e,Box),e}(),FixedElement=function(t){function e(t){_classCallCheck(this,e);var o=t.element,i=t.container,n=t.offsetValue,s=t.offsetElement,r=t.offsetFunction,a=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o));return a.container=new Container(i),a.landmark=new Landmark(a),a.offsetValue=n||0,a.offsetElement=s,a.offsetFunction=r,a.isFixed=!1,a.defaultPosition=a.position(),a.defaultPositionMargins={top:a.styles().top,right:a.styles().right,bottom:a.styles().bottom,left:a.styles().left},window.addEventListener("scroll",a.update.bind(a)),console.log(a),a}return _inherits(e,Box),_createClass(e,[{key:"offset",value:function(){var t=this.offsetValue||0;return this.offsetElement&&(t+=new Box(this.offsetElement).rect().height),this.offsetFunction&&(t=this.offsetFunction(this,t)),t}},{key:"position",value:function(t){if(!t)return this.styles().position;this.dom.style.position=t}},{key:"positionMargins",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};["top","right","bottom","left"].forEach((function(o){return t.dom.style[o]=e[o]||"auto"}))}},{key:"fix",value:function(t){this.isFixed!=t&&(this.isFixed=t,this.isFixed?(this.position("fixed"),this.positionMargins(this),this.dom.classList.remove("fixed-element-inactive"),this.dom.classList.add("fixed-element-active")):(this.position(this.defaultPosition),this.positionMargins(this.defaultPositionMargins),this.dom.classList.remove("fixed-element-active"),this.dom.classList.add("fixed-element-inactive")))}},{key:"update",value:function(t){this.rect();var e=this.offset(),o=this.landmark.rect().top<=0+e;this.top=this.offset()+"px",this.landmark.display(o),this.fix(o)}}]),e}();